// Generated by Haxe 3.4.2
package hxDaedalus.data.math;

import haxe.root.*;

@SuppressWarnings(value={"rawtypes", "unchecked"})
public class ShapeSimplifier extends haxe.lang.HxObject
{
	public ShapeSimplifier(haxe.lang.EmptyObject empty)
	{
	}
	
	
	public ShapeSimplifier()
	{
		//line 6 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		hxDaedalus.data.math.ShapeSimplifier.__hx_ctor_hxDaedalus_data_math_ShapeSimplifier(this);
	}
	
	
	public static void __hx_ctor_hxDaedalus_data_math_ShapeSimplifier(hxDaedalus.data.math.ShapeSimplifier __hx_this)
	{
	}
	
	
	public static haxe.root.Array<java.lang.Object> simplify(haxe.root.Array<java.lang.Object> coords, java.lang.Object epsilon)
	{
		//line 17 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		double __temp_epsilon20 = ( (haxe.lang.Runtime.eq(epsilon, null)) ? (((double) (1) )) : (((double) (haxe.lang.Runtime.toDouble(epsilon)) )) );
		//line 18 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		int len = coords.length;
		//line 21 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		if (( ( len <= 4 ) || ( __temp_epsilon20 < 1 ) )) 
		{
			//line 22 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			return ((haxe.root.Array<java.lang.Object>) (((haxe.root.Array) (new haxe.root.Array<java.lang.Object>(new java.lang.Object[]{}).concat(((haxe.root.Array<java.lang.Object>) (((haxe.root.Array) (coords) )) ))) )) );
		}
		
		//line 25 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		double firstPointX = ((double) (haxe.lang.Runtime.toDouble(coords.__get(0))) );
		//line 26 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		double firstPointY = ((double) (haxe.lang.Runtime.toDouble(coords.__get(1))) );
		//line 27 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		double lastPointX = ((double) (haxe.lang.Runtime.toDouble(coords.__get(( len - 2 )))) );
		//line 28 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		double lastPointY = ((double) (haxe.lang.Runtime.toDouble(coords.__get(( len - 1 )))) );
		//line 30 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		int index = -1;
		//line 31 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		double dist = 0.;
		//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		{
			//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			int _g1 = 1;
			//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			int _g = ( len >> 1 );
			//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			while (( _g1 < _g ))
			{
				//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
				int i = _g1++;
				//line 33 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
				double currDist = hxDaedalus.data.math.Geom2D.distanceSquaredPointToSegment(((double) (haxe.lang.Runtime.toDouble(coords.__get(( i << 1 )))) ), ((double) (haxe.lang.Runtime.toDouble(coords.__get(( (( i << 1 )) + 1 )))) ), firstPointX, firstPointY, lastPointX, lastPointY);
				//line 34 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
				if (( currDist > dist )) 
				{
					//line 35 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
					dist = currDist;
					//line 36 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
					index = i;
				}
				
			}
			
		}
		
		//line 40 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
		if (( dist > ( __temp_epsilon20 * __temp_epsilon20 ) )) 
		{
			//line 42 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			haxe.root.Array<java.lang.Object> l1 = ((haxe.root.Array<java.lang.Object>) (((haxe.root.Array) (coords.slice(0, ( (( index << 1 )) + 2 ))) )) );
			//line 43 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			haxe.root.Array<java.lang.Object> l2 = ((haxe.root.Array<java.lang.Object>) (((haxe.root.Array) (coords.slice(( index << 1 ), null)) )) );
			//line 44 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			haxe.root.Array<java.lang.Object> r1 = hxDaedalus.data.math.ShapeSimplifier.simplify(l1, __temp_epsilon20);
			//line 45 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			haxe.root.Array<java.lang.Object> r2 = hxDaedalus.data.math.ShapeSimplifier.simplify(l2, __temp_epsilon20);
			//line 47 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			haxe.root.Array<java.lang.Object> rs = ((haxe.root.Array<java.lang.Object>) (((haxe.root.Array) (((haxe.root.Array<java.lang.Object>) (((haxe.root.Array) (r1.slice(0, ( r1.length - 2 ))) )) ).concat(((haxe.root.Array<java.lang.Object>) (((haxe.root.Array) (r2) )) ))) )) );
			//line 48 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			return rs;
		}
		else
		{
			//line 50 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/data/math/ShapeSimplifier.hx"
			return new haxe.root.Array<java.lang.Object>(new java.lang.Object[]{((java.lang.Object) (firstPointX) ), ((java.lang.Object) (firstPointY) ), ((java.lang.Object) (lastPointX) ), ((java.lang.Object) (lastPointY) )});
		}
		
	}
	
	
}


